<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developpement/studies">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">Etudes prospectives | PAD+</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://e-PSHAD.github.io/pad-doc/developpement/studies"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Etudes prospectives | PAD+"><meta data-rh="true" name="description" content="Cette page donne des éléments d&#x27;étude sur des fonctionnalités dépriorisées lors du développement initial."><meta data-rh="true" property="og:description" content="Cette page donne des éléments d&#x27;étude sur des fonctionnalités dépriorisées lors du développement initial."><link data-rh="true" rel="icon" href="/pad-doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://e-PSHAD.github.io/pad-doc/developpement/studies"><link data-rh="true" rel="alternate" href="https://e-PSHAD.github.io/pad-doc/developpement/studies" hreflang="en"><link data-rh="true" rel="alternate" href="https://e-PSHAD.github.io/pad-doc/developpement/studies" hreflang="x-default"><link rel="stylesheet" href="/pad-doc/assets/css/styles.3954c2f0.css">
<link rel="preload" href="/pad-doc/assets/js/runtime~main.52d6d0a4.js" as="script">
<link rel="preload" href="/pad-doc/assets/js/main.25f7dcc4.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pad-doc/"><div class="navbar__logo"><img src="/pad-doc/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/pad-doc/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">PAD+ Documentation technique</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/e-PSHAD/pad-doc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pad-doc/">Accueil</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pad-doc/survol">Survol d&#x27;une instance PAD+</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/pad-doc/installation/deploiement">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/pad-doc/marqueblanche/presentation">Marque blanche</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/pad-doc/organisation/contenu">Organisation, données, rôles</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/pad-doc/legal/politiques">Politiques d&#x27;utilisation et RGPD</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/pad-doc/developpement/features">Développement</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pad-doc/developpement/features">Fonctionnalités PAD+</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pad-doc/developpement/guide">Guide du développeur</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pad-doc/developpement/setup-local">Environnement local</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pad-doc/developpement/custom-lang">Personnalisation de la langue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pad-doc/developpement/migrations">Migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pad-doc/developpement/studies">Etudes prospectives</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pad-doc/doc-edition">Edition de la documentation</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pad-doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Développement</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Etudes prospectives</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Etudes prospectives</h1><p>Cette page donne des éléments d&#x27;étude sur des fonctionnalités dépriorisées lors du développement initial.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="visioconférence">Visioconférence<a class="hash-link" href="#visioconférence" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="réécrire-le-mode-direct-du-bloc-visioconférence-pour-ne-pas-utiliser-moodleform">Réécrire le mode direct du bloc visioconférence pour ne pas utiliser MoodleForm<a class="hash-link" href="#réécrire-le-mode-direct-du-bloc-visioconférence-pour-ne-pas-utiliser-moodleform" title="Direct link to heading">​</a></h3><p>A l&#x27;usage, le mode direct du bloc visioconférence peut faire apparaître une popup agaçante quand on quitte le tableau de bord :</p><ul><li>Sur le tableau de bord, sélectionner le mode direct de visioconférence (&quot;maintenant&quot;)</li><li>Sélectionner (au moins) un participant</li><li>Naviguer vers une autre page (sans nécessairement lancer la visio)</li><li>Le navigateur afficher une pop-up pour demander confirmation de fermeture (&quot;Cette page vous demande de confirmer sa fermeture ; des données que vous avez saisies pourraient ne pas être enregistrées.&quot;)</li></ul><p>Cela car le composant de sélection des participants est généré comme un formulaire par MoodleForm (voir <code>blocks/padplusvideocall/classes/videocall_form.php</code>).</p><p>Une solution possible pour réécrire ce composant sans MoodleForm est d&#x27;utiliser directement le composant JS Autocomplete de Moodle (qui est de fait utilisé par MoodleForm). Il s&#x27;agit par exemple de l&#x27;implémentation choisie pour le composant de sélection des participants sur la page &quot;Parcours des stagiaires&quot;. On peut donc se référer à cette page pour des éléments. La différence est que le bloc visioconférence fait une requête Ajax pour filtrer les utilisateurs au lieu de filtrer une simple liste statique comme pour les stagiaires.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="activer-les-enregistrements-pour-les-appels-en-visioconférence">Activer les enregistrements pour les appels en visioconférence<a class="hash-link" href="#activer-les-enregistrements-pour-les-appels-en-visioconférence" title="Direct link to heading">​</a></h3><p>La possibilité d&#x27;enregistrer les visioconférences directes (tableau de bord et page profil) est désactivée dans le code par l&#x27;option <code>&#x27;allowStartStopRecording&#x27; =&gt; false</code> dans <a href="https://github.com/e-PSHAD/PAD/blob/pad-dev/blocks/padplusvideocall/bbbpad_videocall.php#L182" target="_blank" rel="noopener noreferrer">bbbpad_build_meeting_data</a>.</p><p>Pour réactiver cette fonction, il faut donc enlever cette option mais aussi penser au <strong>flot de récupération des médias enregistrés</strong> quand ils sont prêts. En effet ceux-ci ne sont pas immédiatement disponibles après la fin d&#x27;une visioconférence. BigBlueButton doit traiter les données pour consolider les fichiers médias à télécharger, ce qui peut prendre plusieurs minutes.</p><p>BigBlueButton permet de renseigner une <a href="https://docs.bigbluebutton.org/dev/api.html#recording-ready-callback-url" target="_blank" rel="noopener noreferrer">URL &quot;Recording ready callback&quot;</a> à la création d&#x27;une visioconférence, qui sera appelée avec les informations de l&#x27;enregistrement quand celui-ci est prêt. Par exemple, pour les enregistrements de séquence sous Moodle/BigBlueButtonBN, c&#x27;est le fichier <code>mod/bigbluebuttonbn/bbb_broker.php</code> qui a la responsabilité de traiter ces retours. L&#x27;enregistrement devient alors disponible dans l&#x27;activité BigBlueButton référencée.</p><p>Pour les visioconférences directes de la PAD+, qui ne sont pas liées à une séquence, la solution la plus simple à étudier est <strong>l&#x27;envoi d&#x27;une notification</strong> au créateur de la visioconférence, suivant le même mécanisme que pour les liens à partager. En cliquant sur cette notification, l&#x27;usager peut par exemple être redirigé vers une nouvelle page qui va <strong>interagir avec le serveur BigBlueButton pour télécharger l&#x27;enregistrement</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="programmer-une-visioconférence-avec-invitation">Programmer une visioconférence avec invitation<a class="hash-link" href="#programmer-une-visioconférence-avec-invitation" title="Direct link to heading">​</a></h3><p>Avec le système de lien de partage d&#x27;une visioconférence, l&#x27;utilisateur doit malgré tout basculer sur son système d&#x27;agenda pour inviter des participants. Cette partie explique comment générer des <a href="https://en.wikipedia.org/wiki/ICalendar" target="_blank" rel="noopener noreferrer">fichiers iCalendar</a> (<code>.ics</code>) dans les notifications de Moodle, pour permettre aux invités d&#x27;ajouter l&#x27;invitation à leur agenda simplement en ouvrant le fichier ics.</p><p>La branche <code>videocall-ics</code> montre un <strong><a href="https://github.com/e-PSHAD/PAD/blob/videocall-ics/blocks/padplusvideocall/lib.php#L225" target="_blank" rel="noopener noreferrer">POC pour l&#x27;envoi d&#x27;une pièce jointe ics avec la notification de visioconférence</a></strong>, avec des données figées. Le <a href="https://en.wikipedia.org/wiki/ICalendar#Core_object" target="_blank" rel="noopener noreferrer">format iCalendar</a> est un format texte simple avec de nombreuses options.</p><p>Il reste cependant à clarifier plusieurs points, en particulier sur l&#x27;UX de cette fonctionnalité :</p><ul><li>il faut pouvoir renseigner une date et une heure de début (les composants Moodle de base pour ces fonctionnalités, bien qu&#x27;accessibles, sont peu ergonomiques) ;</li><li>il faut pouvoir indiquer la durée ou l&#x27;heure de fin ;</li><li>il faut pouvoir renseigner un titre pour la visio, voir un message d&#x27;invitation personnalisé ;</li><li>enfin il faut réutiliser le composant des visios directes pour sélectionner les personnes à inviter ;</li><li>tous ces éléments prennent de la place, ce qui implique de <strong>repenser le design</strong> pour les afficher (dans une popup par exemple à la place de l&#x27;affichage dans le bloc).</li></ul><p>Entre autres éléments de réflexion, il faut aussi penser à l&#x27;invitation de personnes extérieures (voir ci-dessous) ou au nettoyage des fichiers ics générés.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inviter-un-participant-sans-compte-pad">Inviter un participant sans compte PAD+<a class="hash-link" href="#inviter-un-participant-sans-compte-pad" title="Direct link to heading">​</a></h3><p>Actuellement tous les participants invités à une visioconférence créée via la PAD+ doivent avoir un compte PAD+. <a href="/pad-doc/installation/visioconference#int%C3%A9gration-dans-la-pad">L&#x27;intégration seule de Greenlight</a> permet d&#x27;inviter des participants extérieurs (sans compte PAD+) via une interface indépendante.</p><p>Pour permettre ces connexions extérieures, il faut repenser le flot de connexion dans <a href="https://github.com/e-PSHAD/PAD/blob/pad-dev/blocks/padplusvideocall/bbbpad_videocall.php" target="_blank" rel="noopener noreferrer">bbbpad_videocall.php</a> :</p><ul><li>enlever le <code>require_login</code> qui redirige vers la page de connexion ;</li><li>à la place, si la personne n&#x27;est pas connectée, la rediriger vers un nouvel écran pour lui demander son nom d&#x27;usage pour la visioconférence, paramètre requis par le serveur BigBlueButton (voir par exemple l&#x27;écran de connexion anonyme de Greenlight) ;</li><li>quand la personne a donné son nom, alors elle peut rerentrer dans le flot de connexion de la visioconférence (voir les paramètres de <a href="https://github.com/e-PSHAD/PAD/blob/pad-dev/blocks/padplusvideocall/bbbpad_videocall.php#L220" target="_blank" rel="noopener noreferrer">bbbpad_join_meeting</a>).</li></ul><p>Il reste évidemment à clarifier certaines options, comme à savoir comment gérer les personnes extérieures si la visioconférence n&#x27;existe pas encore (création automatique, salle d&#x27;attente...).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vue-hebdomadaire-du-calendrier">Vue hebdomadaire du calendrier<a class="hash-link" href="#vue-hebdomadaire-du-calendrier" title="Direct link to heading">​</a></h2><p>Le calendrier Moodle offre par défaut uniquement les vues mensuelles, journalières, et la liste des événements à venir. Pour les établissements qui construisent une programmation hebdomadaire pour leurs stagiaires, il n&#x27;existe pas de vue d&#x27;ensemble à la semaine, visualisant la grille des horaires de travail et le placement des événements sur cette grille (voir par exemple la vue à la semaine sous Outlook ou Google Calendar).</p><p>La conception de cette vue offre cependant de nombreux challenges :</p><ul><li>portée horaire de la grille (horaire de travail ou toute la journée ?) ;</li><li>détermination des jours de la semaine à afficher (début et fin de semaine par rapport à la date courante) ;</li><li>placement des événements sur la grille horaire, tout en respectant le responsive design et l&#x27;accessibilité ;</li><li>affichage des événements qui durent toute la journée, voir plusieurs jours ;</li><li>affichage des événements qui se <strong>chevauchent</strong> sur la grille (voir ci-dessous) ;</li><li>interaction de l&#x27;utilisateur : ajout d&#x27;un événement à l&#x27;heure choisie par l&#x27;utilisateur dans la grille horaire.</li></ul><p>En complément, une requête des professionnels est la possibilité d&#x27;importer facilement leur planning pédagogique sur la plateforme, à partir d&#x27;un format à déterminer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="extension-de-la-vue-calendrier">Extension de la vue calendrier<a class="hash-link" href="#extension-de-la-vue-calendrier" title="Direct link to heading">​</a></h3><p>La page calendrier est prise en charge par le fichier <code>calendar/view.php</code>. Le paramètre <code>$view</code> de la requête est celui qui permet de choisir le type de vue à afficher, entre les valeurs <code>month</code>, <code>day</code> et <code>upcoming</code>. L&#x27;ajout d&#x27;une nouvelle vue passe donc par une nouvelle valeur possible, par exemple <code>week</code>.</p><p>La fonction la plus importante pour la suite du process est <code>calendar_get_view</code> dans <code>calendar/lib.php</code>. Cette fonction a la responsabilité de récupérer les événements correspondant à la période demandée par l&#x27;utilisateur ainsi que le modèle d&#x27;affichage (i.e. les données formattées pour le rendu dans la vue HTML), en fonction du paramètre <code>$view</code> et des autres paramètres.</p><p>Si certaines fonctions et modèles peuvent être surchargées dans le thème, ce n&#x27;est pas le cas par exemple du fichier <code>calendar/view.php</code>. Il faut donc s&#x27;attendre à des modifications partiellement invasises si cette fonctionnalité est envisagée.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="algorithme-dempilement-des-événements-en-cas-de-chevauchement">Algorithme d&#x27;empilement des événements en cas de chevauchement<a class="hash-link" href="#algorithme-dempilement-des-événements-en-cas-de-chevauchement" title="Direct link to heading">​</a></h3><p>Une des principales difficultés de cette vue est l&#x27;affichage des événements qui se chevauchent sur un même créneau horaire pour une journée donnée, par exemple :</p><ul><li>un événement qui commence avant qu&#x27;un autre soit terminé ;</li><li>un événement qui dure plus longtemps qu&#x27;un autre.</li></ul><p>La difficulté tient ici dans le placement physique sur la grille horaire, quand les autres vues se contentent d&#x27;afficher sous forme de liste les événements qui ont lieu &quot;en même temps&quot; (le même jour). Cette difficulté implique de calculer, en plus de la position horaire, un &quot;ordre&quot; qui permet de décaler (dans une colonne par exemple) des événements qui se chevauchent et éviter qu&#x27;ils se masquent entre eux.</p><p>L&#x27;algorithme abstrait ci-dessous donne une piste à approfondir. Elle demande validation par des tests.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Entrée (cas initial) :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- la liste des événements de la journée visée, dans l&#x27;ordre chronologique de démarrage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (puis par durée décroissante, pour les éléments qui commenceraient en même temps)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sortie :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- la liste des événements, chacun avec son numéro d&#x27;ordre pour affichage en colonne</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test de chevauchement :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- la fonction qui permet de détecter un chevauchement est en fait très simple.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event_1_start &lt; event_2_end &amp;&amp; event_2_start &lt; event_1_end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- autrement dit, deux événements se chevauchent si et seulement si</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  chacun commence avant que l&#x27;autre se termine.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Initialisation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- une liste &#x27;chevauchement&#x27; avec le premier événement de la journée à l&#x27;ordre 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- le reste de la liste des événements (sans le premier)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Algorithme :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- pour chaque événement de la journée</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - pour chaque élément dans l&#x27;ordre FIFO de la liste &#x27;chevauchement&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - si chevauchement avec le nouvel événement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - si c&#x27;est le dernier de la liste chevauchement :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ajouter l&#x27;événement à la liste chevauchement avec ordre + 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - sinon passer à l&#x27;élément suivant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - sinon (pas de chevauchement entre l&#x27;élément et le nouvel événement)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - si l&#x27;événement n&#x27;a pas encore d&#x27;ordre :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        remplacer l&#x27;élément par l&#x27;événement en copiant son ordre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - sinon enlever l&#x27;élément de la liste sans changer l&#x27;ordre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (étape facultative, permet de &quot;nettoyer&quot; la liste des éléments passés)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Comme on itère dans l&#x27;ordre chronologique, dès qu&#x27;un événement est remplacé, les événements ultérieurs ne pourront plus se chevaucher avec lui.</p><p>L&#x27;ordre détermine le décalage de position (ou encore le numéro de colonne suivant implémentation). Si on doit déterminer le nombre maximum d&#x27;éléments se chevauchant pour chaque événement, il faut maintenir un peu plus de données dans l&#x27;élément (pour déterminer la taille des colonnes par exemple).</p><p>Voici un exemple avec de multiples chevauchements sur 4 colonnes (entête). Les <code>x</code> indiquent quand un événement se termine.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> 1 - 2 - 3 - 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> e1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> e2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> |   e3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> |   |   e4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> |   x   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> |   e5  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> |   |   |   e6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> x   |   |   x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> e7  x   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> |   e8  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> |   x   x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> x   e9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> e10 x</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Exemple de déroulement de l&#x27;algorithme (dans <code>ex,y</code>, <code>x</code> est le numéro d&#x27;événement et <code>y</code> son ordre affecté par l&#x27;algorithme ; une <code>*</code> marque le nouvel événement ) :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- *e1,1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- *e2,1                         // pas de chevauchement, e1 est oublié</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- e2,1  | *e3,2                 // chevauchement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- e2,1  | e3,2  | *e4,3         // triple chevauchement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- e2,1  | *e5,2 | e4,3          // e5 chevauche avec e2 et e4 mais pas e3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                // e5 remplace e3 mais on garde e4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- e2,1  | e5,2  | e4,3 | *e6,4  // e6 chevauche avec e2, e5 et e4, prend le 4ème slot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- *e7,1 | e5,2  | e4,3          // e7 remplace e2, e6 terminé et enlevé</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- e7,1  | *e8,2 | e4,3          // e8 remplace e5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                // (si e7 et e8 commencent en même temps, l&#x27;ordre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                // peut être donné par la durée e7 &gt; durée e8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- e7,1  | *e9,2                 // e9 remplace e8 et on enlève e4 passé</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- *e10,1                        // e10 remplace e7 et e9 est passé</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/e-PSHAD/pad-doc/edit/main/docs/developpement/studies.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/pad-doc/developpement/migrations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Migrations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pad-doc/doc-edition"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Edition de la documentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#visioconférence" class="table-of-contents__link toc-highlight">Visioconférence</a><ul><li><a href="#réécrire-le-mode-direct-du-bloc-visioconférence-pour-ne-pas-utiliser-moodleform" class="table-of-contents__link toc-highlight">Réécrire le mode direct du bloc visioconférence pour ne pas utiliser MoodleForm</a></li><li><a href="#activer-les-enregistrements-pour-les-appels-en-visioconférence" class="table-of-contents__link toc-highlight">Activer les enregistrements pour les appels en visioconférence</a></li><li><a href="#programmer-une-visioconférence-avec-invitation" class="table-of-contents__link toc-highlight">Programmer une visioconférence avec invitation</a></li><li><a href="#inviter-un-participant-sans-compte-pad" class="table-of-contents__link toc-highlight">Inviter un participant sans compte PAD+</a></li></ul></li><li><a href="#vue-hebdomadaire-du-calendrier" class="table-of-contents__link toc-highlight">Vue hebdomadaire du calendrier</a><ul><li><a href="#extension-de-la-vue-calendrier" class="table-of-contents__link toc-highlight">Extension de la vue calendrier</a></li><li><a href="#algorithme-dempilement-des-événements-en-cas-de-chevauchement" class="table-of-contents__link toc-highlight">Algorithme d&#39;empilement des événements en cas de chevauchement</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Sources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/e-PSHAD/pad-doc" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Pad-doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tutorial.docusaurus.io/docs/intro" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/markdown-features" target="_blank" rel="noopener noreferrer" class="footer__link-item">Markdown<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Communauté</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 e-PSHAD. Built with Docusaurus.</div></div></div></footer></div>
<script src="/pad-doc/assets/js/runtime~main.52d6d0a4.js"></script>
<script src="/pad-doc/assets/js/main.25f7dcc4.js"></script>
</body>
</html>